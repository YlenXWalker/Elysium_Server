# This file is a part of rAthena.
#   Copyright(C) 2021 rAthena Development Team
#   https://rathena.org - https://github.com/rathena
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see <http://www.gnu.org/licenses/>.
###########################################################################
# Collection Database
###########################################################################
#
# Settings
#
###########################################################################
# - StorageId               Storage Id.
#   Bound                   if storage shared by account or not. (Default: true)
#   Withdraw                If item in this storage can be withdrawn after Collected. (Default: true)
#   CollectionFee           Price to Collection any item from this storage. (Default: 0)
#   WithdrawFee             Price to withdraw any item from this storage. (Default: 0)
#   Combos:                 List of possible items.
#     - Combo               Item name.
#       Amount              Item amount. (Default: 1)
#       Refine              Item refine. (Default: 0)
#       Withdraw            If this item can be withdrawn after Collected. (Default: true)
#       CollectionFee       Price to Collection this item from this storage. (Default: 0)
#       WithdrawFee         Price to withdraw any item from this storage. (Default: 0)
#       Script              Script to execute when the item successfully Collected. (Default: null)
#   Items:                  List of possible items.
#     - Item                Item name.
#       Amount              Item amount. (Default: 1)
#       Refine              Item refine. (Default: 0)
#       Withdraw            If this item can be withdrawn after Collected. (Default: true)
#       CollectionFee       Price to Collection this item from this storage. (Default: 0)
#       WithdrawFee         Price to withdraw any item from this storage. (Default: 0)
#       Script              Script to execute when the item successfully Collected. (Default: null)
###########################################################################

Header:
  Type: COLLECTION_DB
  Version: 3

Body:
  - StorageId: 10
    CollectionFee: 1000000
    WithdrawFee: 1000000
    Combos:
        #Job Specific Card Combinations
      - Name: "Archer Combo"        
        Combo:
          - Dragon_Tail_Card      # 4178
          - Merman_Card           # 4199
          - Anolian_Card          # 4234
          - Alligator_Card        # 4252
          - Cruiser_Card          # 4297
        Withdraw: true  
        CollectionFee: 1000000          
        Amount: 1   
        Script: |              
            bonus bAgi,5;
            bonus bDex,3;
            bonus bLongAtkRate,20;
            bonus bPerfectHitAddRate,20;
            if (BaseClass == Job_Archer) {
              bonus2 bExpAddRace,RC_Brute,5;
              bonus2 bComaRace,RC_Brute,100;
              bonus2 bComaRace,RC_Player_Doram,100;
            }
      - Name: "Crusader Combo"            
        Combo:
          - Permeter_Card         # 4311
          - Freezer_Card          # 4319
          - Heater_Card           # 4331
          - Archdam_Card          # 4371  
        Amount: 1   
        Script: |              
            bonus bInt,1;
            bonus bStr,1;
            bonus bDef,2;
            bonus bSPrecovRate,10;
            bonus2 bSkillAtk,"PA_SHIELDCHAIN",10;
            bonus2 bSkillAtk,"PA_SACRIFICE",10;
            bonus bVariableCastrate,-10;
            if (BaseJob == Job_Crusader)
              bonus bDefEle,Ele_Holy;
      - Name: "Merchant Combo"             
        Combo:
          - Muka_Card             # 4036
          - Raggler_Card          # 4186
          - Baby_Leopard_Card     # 4233
          - Zipper_Bear_Card      # 4281
          - Mole_Card             # 4343
        Amount: 1   
        Script: |              
            bonus bStr,4;
            bonus bMaxHPrate,7;
            bonus bMaxSPrate,7;
            bonus2 bSkillAtk,"MC_MAMMONITE",20;
            bonus bSPDrainValue,1;
            if (BaseJob == Job_Alchemist) {
              bonus3 bAutoSpell,"BS_ADRENALINE",1,10;
              bonus2 bAddMonsterDropItem,7139,3;
              bonus2 bAddMonsterDropItem,905,10;
            }
      - Name: "Magician Combo"           
        Combo:
          - Loli_Ruri_Card        # 4191
          - Miyabi_Ningyo_Card    # 4208
          - Wicked_Nymph_Card     # 4258
          - Parasite_Card         # 4309
          - Harpy_Card            # 4325
          - Blood_Butterfly_Card  # 4327
        Amount: 1   
        Script: |              
            bonus bMaxHP,500;
            bonus bDef,5;
            bonus bMdef,5;
            bonus2 bSkillAtk,"MG_COLDBOLT",10;
            bonus2 bSkillAtk,"MG_FIREBOLT",10;
            bonus2 bSkillAtk,"MG_LIGHTNINGBOLT",10;
            if (BaseClass == Job_Mage) {
              bonus bMatkRate,3;
              bonus bVariableCastrate,-15;
            }
      - Name: "Swordsman Combo"           
        Combo:
          - Solider_Card          # 4220
          - Assulter_Card         # 4246
          - Permeter_Card         # 4311
          - Freezer_Card          # 4319
          - Heater_Card           # 4331
        Amount: 1   
        Script: |              
            bonus bStr,10;
            bonus bMaxHPrate,20;
            bonus bHPrecovRate,50;
            bonus3 bAutoSpell,"BS_WEAPONPERFECT",1,3;
            bonus2 bAddMonsterDropItem,501,500;
            if (BaseClass == Job_Swordman)
              bonus2 bAddItemGroupHealRate,IG_Potion,50;
      - Name: "Acolyte Combo"             
        Combo:
          - Rideword_Card         # 4185
          - Live_Peach_Tree_Card  # 4217
          - Geographer_Card       # 4280
          - Cookie_Card           # 4293
          - Fur_Seal_Card         # 4312
        Amount: 1   
        Script: |              
            bonus bVit,10;
            bonus bVariableCastrate,-10;
            bonus bUseSPrate,-10;
            if (BaseClass == Job_Acolyte) {
              bonus2 bExpAddRace,RC_Undead,5;
              bonus2 bExpAddRace,RC_Demon,5;
              bonus2 bSubRace,RC_Undead,30;
              bonus2 bSubRace,RC_Demon,30;
            }
      - Name: "Bard & Dancer Combo"           
        Combo:
          - Dragon_Tail_Card      # 4178
          - Anolian_Card          # 4234
          - Alligator_Card        # 4252
          - Cruiser_Card          # 4297
          - Ferus__Card           # 4381
        Amount: 1   
        Script: |              
            bonus bDex,5;
            bonus2 bSkillAtk,"CG_ARROWVULCAN",5;
            bonus2 bSkillAtk,"DC_THROWARROW",10;
            bonus2 bSkillAtk,"BA_MUSICALSTRIKE",10;
            if (BaseJob == Job_Bard || BaseJob == Job_Dancer){
              bonus3 bAutoSpellWhenHit,"CG_TAROTCARD",2,50;
            }
      - Name: "Alchemist Combo"           
        Combo:
          - Muka_Card             # 4036
          - Raggler_Card          # 4186
          - Baby_Leopard_Card     # 4233
          - Zipper_Bear_Card      # 4281
          - Mole_Card             # 4343
        Amount: 1   
        Script: |              
            bonus bStr,4;
            bonus bMaxHPrate,7;
            bonus bMaxSPrate,7;
            bonus2 bSkillAtk,"MC_MAMMONITE",20;
            bonus bSPDrainValue,1;
            if (BaseJob == Job_Alchemist) {
              bonus3 bAutoSpell,"BS_ADRENALINE",1,10;
              bonus2 bAddMonsterDropItem,7139,3;
              bonus2 bAddMonsterDropItem,905,10;
            }
      - Name: "Thief Combo"            
        Combo:
          - The_Paper_Card        # 4172
          - Wander_Man_Card       # 4210
          - Shinobi_Card          # 4230
          - Wild_Rose_Card        # 4257
          - Dancing_Dragon_Card   # 4272
        Amount: 1   
        Script: |              
            bonus bAgi,5;
            bonus bStr,5;
            bonus bAspdRate,5;
            bonus bSpeedRate,25;
            bonus bSPDrainValue,1;
            if (BaseClass == Job_Thief)
              bonus bNoGemStone;
      - Name: "Monk Combo"             
        Combo:
          - Rideword_Card         # 4185
          - Cookie_Card           # 4293
          - Fur_Seal_Card         # 4312
          - Waste_Stove_Card      # 4332
        Amount: 1   
        Script: |              
            bonus bStr,3;
            bonus bMaxSP,80;
            bonus bBaseAtk,25;
            bonus3 bAutoSpell,"AL_CRUCIS",5,10;
            bonus2 bSkillAtk,"MO_EXTREMITYFIST",10;
            if (BaseJob == Job_Monk) {
              bonus bUseSPrate,-10;
              bonus bNoCastCancel;
            }
      - Name: "Rogue Combo"           
        Combo: 
          - Stainer_Card          # 4039
          - Wander_Man_Card       # 4210
          - Shinobi_Card          # 4230
          - Wild_Rose_Card        # 4257
          - Whikebain_Card        # 4348
        Amount: 1   
        Script: |              
            bonus bStr,6;
            bonus bAgi,4;
            bonus2 bSkillAtk,"RG_BACKSTAP",10;
            if (getskilllv("RG_STRIPARMOR") == 5)
              bonus3 bAutoSpell,"RG_STRIPARMOR",5,50;
              if (BaseJob == Job_Rogue) {
                  bonus bUseSPrate,-20;
                  bonus3 bAutoSpell,"RG_INTIMIDATE",1,-20;
              }
      - Name: "Sage Combo"
        Combo:
          - Miyabi_Ningyo_Card      # 4208
          - Wicked_Nymph_Card       # 4258
          - Harpy_Card              # 4325
          - Blood_Butterfly_Card    # 4327
          - Novus__Card             # 4382
        Amount: 1   
        Script: |              
            bonus bInt,3;
            bonus2 bSkillAtk,"WZ_HEAVENDRIVE",10;
            bonus2 bSkillAtk,"MG_THUNDERSTORM",10;
            if (BaseJob == Job_Sage) {
              bonus bMagicDamageReturn,20;
              bonus2 bAddMonsterDropItem,716,100;
              bonus2 bAddMonsterDropItem,715,100;
              bonus bVariableCastrate,-20;
            }
    Items:
     - Item: Knight_Of_Abyss_Card
       Amount: 100
       Script: |
         bonus2 bAddClass,Class_Boss,1;
